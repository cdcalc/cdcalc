buildscript {
    repositories {
        mavenCentral()
        mavenLocal()
    }
    dependencies {
        classpath 'com.github.cdcalc:cdcalc-gradle:0.0.1-SNAPSHOT'
    }
}

version = '0.0.1-SNAPSHOT'

apply plugin: 'cdcalc'

cdcalc {
    repository = '../.git'
}

task publish(dependsOn: 'calculateVersion', description: 'Publish artifacts to Nexus', group: 'Publishing') {
    doLast {
        println("Version from calculateVersion $cdcalc.calculatedVersion")
        project.version = cdcalc.calculatedVersion
        println("Version $version")
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = "3.2.1"
}
