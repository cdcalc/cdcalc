buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "com.gradle.publish:plugin-publish-plugin:0.9.7"
    }
}

plugins {
    id "com.github.johnrengelman.shadow" version "2.0.1"
}

dependencies {
    compile gradleApi()
}

apply plugin: 'maven-publish'
apply plugin: "com.gradle.plugin-publish"

shadowJar {
    classifier = null
}

publishing {
    publications {
        /*mavenJava(MavenPublication) {
            artifactId 'cdcalc-gradle'
            from components.java
        }*/
        shadow(MavenPublication) { publication ->
            project.shadow.component(publication)
        }
    }

    repositories {
        maven {
            name "release"
            url nexusUrl
            credentials {
                username = nexusUsername
                password = nexusPassword
            }
        }
    }
}

pluginBundle {
    website = 'https://github.com/cdcalc/cdcalc'
    vcsUrl = 'https://github.com/cdcalc/cdcalc'
    description = 'Calculate version for upcoming releases.'
    tags = ['semver']

    plugins {
        calculateSemVerPlugin {
            id = 'com.github.cdcalc'
            displayName = 'Calculate SemVer Plugin'
        }
    }
}
